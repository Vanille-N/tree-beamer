\section{Deriving rules}

\begin{frame}[t]
    \frametitle{Active, Frozen, Disabled (very simplified)}
    Core triplet of permissions to represent
    \begin{itemize}
        \item unique mutable references: \texttt{Active},
        \item shared immutable references: \texttt{Frozen},
        \item lifetime ended: \texttt{Disabled}.
    \end{itemize}

    \begin{onlyenv}<1>
        \begin{block}{Child \textover{read}{write}: must allow reading}
            \begin{itemize}
                \item \texttt{Active} \(\to\) \texttt{Active}
                \item \texttt{Frozen} \(\to\) \texttt{Frozen}
                \item \texttt{Disabled} \(\to\) UB
            \end{itemize}
        \end{block}
        \includegraphics{steps.core.cr.pdf}
    \end{onlyenv}

    \begin{onlyenv}<2>
        \begin{block}{Child write: must allow writing}
            \begin{itemize}
                \item \texttt{Active} \(\to\) \texttt{Active}
                \item \texttt{Frozen} \(\to\) UB
                \item \texttt{Disabled} \(\to\) UB
            \end{itemize}
        \end{block}
        \includegraphics{steps.core.cr+cw.pdf}
    \end{onlyenv}

    \begin{onlyenv}<3>
        \begin{block}{Foreign \textover{read}{write}: no longer unique}
            \begin{itemize}
                \item \texttt{Active} \(\to\) \texttt{Frozen}
                \item \texttt{Frozen} \(\to\) \texttt{Frozen}
                \item \texttt{Disabled} \(\to\) \texttt{Disabled}
            \end{itemize}
        \end{block}
        \includegraphics{steps.core.cr+cw+fr.pdf}
    \end{onlyenv}

    \begin{onlyenv}<4>
        \begin{block}{Foreign write: no longer immutable}
            \begin{itemize}
                \item \texttt{Active} \(\to\) \texttt{Disabled}
                \item \texttt{Frozen} \(\to\) \texttt{Disabled}
                \item \texttt{Disabled} \(\to\) \texttt{Disabled}
            \end{itemize}
        \end{block}
        \includegraphics{steps.core.cr+cw+fr+fw.pdf}
    \end{onlyenv}
\end{frame}

\begin{frame}
    \frametitle{This simplified model already enforces}
    \begin{description}
        \item[\cmark] \texttt{Active} (\texttt{\&mut}) readable and writeable
        \item[\cmark] \texttt{Frozen} (\texttt{\&}) and all their children are only readable
        \item[\cmark] data behind \texttt{Active} (\texttt{\&mut}) is owned exclusively
        \item[\cmark] data behind \texttt{Frozen} (\texttt{\&}) is immutable
    \end{description}
\end{frame}
